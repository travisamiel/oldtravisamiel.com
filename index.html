<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
    <script src="https://d3js.org/d3-ease.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-selection.v1.min.js"></script>
    <script src="https://d3js.org/d3-timer.v1.min.js"></script>
    <script src="https://d3js.org/d3-transition.v1.min.js"></script>
    <noscript>
        <style>
            #aquarium-section {
                display: none;
            }
        </style>
    </noscript>
    <title>Travis Amiel</title>
</head>
<body>
<p>Hello Internet. This is a placeholder page for Travis Amielâ€™s nice new website. You can find out a lot about Travis by going to <a href="https://www.twitter.com/heytravistravis" target="_blank">his Twitter</a>.
</p>
<section id="aquarium-section">
        <h2>Main artistic influences at this time</h2>
        <figure id="container" class="fullwidth" style="height: 25em; border: 2px solid #111; border-radius: 2px">
            <svg id="aquarium"></svg>
        </figure>
    </section>
</article>
</body>
<script defer>
    const data = [
        'Amanda Palmer',
        'Pee-Wee\'s Playhouse',
        'Taylor Mac',
        'Philip Glass',
        '30 Rock',
        'Parks and Recreation',
        'Brandon Jacob Jenkin\'s An Octoroon',
        'Hedwig and the Angry Inch',
        'Broad City',
        'Arrested Development'
    ];

    const container = document.getElementById('container');
    const aquarium = document.getElementById('aquarium');

    let width, height;

    function resize() {
        width = container.offsetWidth || 400 + 'px';
        height = container.offsetHeight || 400 + 'px';
        aquarium.setAttribute('width', width);
        aquarium.setAttribute('height', height);
    }

    window.addEventListener('resize', resize);
    resize();

    const get_x = () => Math.floor(Math.random() * (width - 48));
    const get_y = () => Math.floor(Math.random() * (height - 16));

    d3.select(aquarium).selectAll('.fish').data(data).enter().append('text')
        .attr('class', 'fish')
        .attr('x', get_x)
        .attr('y', get_y)
        .text(text => text)
        .each(function() {translate(d3.select(this))});

    function translate(selection) {
        selection.transition()
            .duration(() => 2000 + (Math.random() * 3000))
            .attr('x', get_x)
            .attr('y', get_y)
            .on('end', () => translate(selection));
    }
</script>
